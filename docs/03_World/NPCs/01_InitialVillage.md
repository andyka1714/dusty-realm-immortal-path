# 初始村莊 NPC 規格書 (Initial Village NPC Spec)

## 1. 村莊概況
*   **名稱**: 道始村 (Dao Origin Village) / Novice Village
*   **定位**: 新手引導、基礎物資補給、早期任務集散地。
*   **適用境界**: 凡人 (Mortal) ~ 練氣期 (Qi Refining)

## 2. 經濟體系分析 (Economy Analysis)
## 2. 經濟體系分析 (Economy Analysis)
基於目前遊戲數據 (`data/enemies/common.ts`, `data/drop_tables.ts`) 的經濟現狀分析：

*   **收入參考**:
    *   **凡人怪物掉落**: **1-5 靈石/隻** (平均 3)。
    *   **練氣怪物掉落**: 10-20 靈石/隻 (平均 15)。
    *   新手玩家戰鬥效率: 約 5-10 秒/隻 -> 分鐘收入約 18-36 靈石。

*   **定價黃金比例 (Pricing Strategy)**:
    *   **核心原則**: 同境界基礎裝備 (下品) 售價約為單隻怪物平均掉落的 **20倍**。
    *   **凡人期**: 平均掉落 3 -> 目標售價 **60 靈石** (區間 40-70)。
    *   **練氣期**: 平均掉落 15 -> 目標售價 **300 靈石**。
    *   這確保了玩家必須進行一定程度的狩獵 (約 20 隻怪) 才能換取一件基礎保底裝備。

*   **消費策略**:
    *   **丹藥**: 當前無戰鬥中喝水機制，僅作為脫戰後恢復手段。
    *   **客棧**: 作為主要恢復途徑，定價應低於購買同等恢復量丹藥的成本。

---

### 3. NPC 列表與詳細規格

Locations relative to **Spawn Point (20, 20)**:

*   **Top-Left (15, 15)**: **General Store (珍寶閣分號)**
*   **Top-Right (25, 15)**: **Blacksmith (鐵匠鋪)**
*   **Bottom-Left (15, 25)**: **Scripture Pavilion (藏經閣)**
*   **Bottom-Right (25, 25)**: **Village Chief (村長家)**

### A. 雜貨舖 (General Store)
*   **店名**: 珍寶閣分號 (Treasure Pavilion - Branch)
*   **NPC**: 王掌櫃 (Shopkeeper Wang)
*   **功能**: 販售基礎消耗品、收購玩家雜物。

#### 商品清單 (Goods List)
| 物品 ID | 名稱 | 建議售價 (靈石) | 備註 |
| :--- | :--- | :--- | :--- |
| `heal_pill` | 回春丹 | 20 | (非戰鬥用) 脫戰後恢復，價格親民。 |
| `qi_pill` | 聚氣丹 | 50 | 微量修為，奢侈品。 |
| `wooden_charm` | 平安符(下品) | 60 | 凡人飾品，符合 20x 定價。 |
| `map_mortal_region` | 凡界地圖(粗略) | 100 | 解鎖周邊視野。 |

---

### B. 裝備店 (Equipment Shop)
*   **店名**: 鐵匠鋪 (Blacksmith)
*   **NPC**: 鐵匠張 (Blacksmith Zhang)
*   **功能**: 販售基礎裝備 (下品)。

#### 商品清單 (Goods List)
| 物品 ID | 名稱 | 建議售價 (靈石) | 備註 |
| :--- | :--- | :--- | :--- |
| `novice_sword` | 鏽鐵劍(下品) | 60 | 攻擊+8。符合 20x 掉落比 (3*20=60)。 |
| `novice_robe` | 粗布衣(下品) | 60 | 防禦+10。符合 20x 掉落比。 |
| `wooden_shield`| 木鍋蓋(下品) | 40 | 防禦+5。稍低於標準，作為入門副手。 |

> **設計備註**: 
> *   商店僅販售**下品 (Low Quality)** 裝備，作為保底手段。
> *   中品、上品、極品裝備必須透過**精英怪/Boss掉落**或**煉器**獲取。
> *   練氣期裝備預估售價：`spirit_iron_sword` (紋鐵劍) 建議定價 300 靈石 (15 * 20)。

---

### C. 藏經閣 (Scripture Pavilion)
*   **店名**: 藏經閣 (Scripture Pavilion)
*   **NPC**: 傳功長老 (Elder of Techniques)
*   **位置**: 村莊左下方 (15, 25)
*   **功能**: 販售基礎功法(被動/主動技能書)。
*   **現狀分析**: 目前代碼尚未實作主動技能體系，建議透過「持有即生效」或「消耗學習」的道具來呈現。

#### 商品清單 (Goods List)
| 物品 ID | 名稱 | 建議售價 (靈石) | 效果 (Spec) |
| :--- | :--- | :--- | :--- |
| `manual_basic_breath`| 吐納法(書) | 500 | [被動] 修煉速度 +5%。 |
| `manual_iron_skin` | 鐵布衫(書) | 800 | [被動] 防禦力 +10。 |
| `manual_swift_step` | 輕身術(書) | 800 | [被動] 速度 +5，閃避 +1%。 |
| `manual_spirit_strike`| 靈力一擊(書)| 1500 | [主動/觸發] 攻擊時有 10% 機率造成 150% 傷害。(需戰鬥系統支援) |

---

### D. 任務發佈 (Quest Giver)
*   **稱號**: 村長 (Village Chief)
*   **NPC**: 李村長 (Chief Li)
*   **功能**: 發佈新手引導任務、日常委託。
*   **對話風格**: 慈祥、擔憂村莊安全、引導。

#### 任務設計 (Quest Examples)
1.  **初入仙途 (Tutorial)**
    *   **目標**: 裝備一把武器 (`novice_sword` 或其他)。
    *   **描述**: "年輕人，外面的世界很危險，先去鐵匠鋪找些趁手的傢伙吧。"
    *   **獎勵**: 靈石 x100, `heal_pill` x5。

2.  **清理後山 (Daily/Repeatable)**
    *   **目標**: 擊殺 `m1_c1` (後山走兔) x 5。
    *   **描述**: "後山的兔子最近太猖狂了，去教訓牠們一下。"
    *   **獎勵**: 靈石 x50, 修為 x100。

3.  **突破瓶頸 (Milestone)**
    *   **目標**: 境界達到「練氣一層」。
    *   **描述**: "我看你骨骼驚奇，是個修仙的料。突破練氣期後再來找我。"
    *   **獎勵**: `spirit_iron_sword` (紋鐵劍) x1 - *給予玩家第一把強力武器的獎勵*。

---

## 4. 新增 NPC 建議 (Proposals)

除了上述基礎 NPC 外，建議新增以下功能型 NPC 以豐富遊戲性：

### E. 遊方郎中/煉丹師 (Alchemist)
*   **位置**: 村口大樹下
*   **功能**:
    *   **煉丹服務 (Crafting)**: 玩家提供材料 (如 `herb_basic` + `monster_core`) + 手續費，製作成丹藥。
    *   **優勢**: 比直接買成品便宜，賦予收集材料 (`Category.Material`) 的意義。

### G. 鑑寶師 (Appraiser) - *中期規劃*
*   **功能**: 對掉落的「未鑑定」裝備進行鑑定，隨機生成詞條屬性。目前裝備掉落即確定屬性，未來可考慮加入隨機性。

---

## 5. 實作建議路徑
1.  **資料結構**: 在 `data/npcs.ts` 中建立 NPC 定義，包含 `shopInventory` (商品ID列表) 與 `dialogues`。
2.  **商店介面**: 實作一個通用的 `ShopPanel` 組件，點擊 NPC 後開啟。
3.  **任務系統**: 需在 Redux (`questSlice`) 建立任務狀態 (Active, Completed, Rewards)，並在 `Elder` NPC 介面中顯示。
4.  **互動物件**: 在地圖 (`Adventure.tsx`) 安全區新增 NPC 圖示，點擊觸發互動。
